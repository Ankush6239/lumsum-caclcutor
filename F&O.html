<!doctype html>
<html lang="en">
  <head>
    <!-- Set the character set and viewport for the webpage -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Set the title of the webpage -->
    <title>Margin Calculator</title>

    <!-- Include the Bootstrap CSS file from a CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  </head>
  <body>

    <!-- Create a form for the user to enter information -->
    <div class="card" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title">Margin Calculator</h5>
        <div class="mb-3">
          <label for="index" class="form-label">Index</label>
          <select id="index" class="form-select">
            <option value="NIFTY">NIFTY</option>
            <option value="BANKNIFTY">BANKNIFTY</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="segment" class="form-label">Segment</label>
          <select id="segment" class="form-select" onchange="showCallPut()">
            <option value="FUTURE">FUTURE</option>
            <option value="OPTION">OPTION</option>
          </select>
        </div>
        <div class="mb-3" id="callputDiv" style="display: none;">
          <label for="callput" class="form-label">CALL/PUT</label>
          <select id="callput" class="form-select">
            <option value="CALL">CALL</option>
            <option value="PUT">PUT</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="expiry" class="form-label">Expiry Date</label>
          <input type="date" id="expiry" class="form-control">
        </div>
        <div class="mb-3">
          <label for="quantity" class="form-label">Quantity</label>
          <input type="number" id="quantity" class="form-control">
        </div>
        <div class="mb-3">
          <label for="buysell" class="form-label">Buy/Sell</label>
          <select id="buysell" class="form-select" onchange="showNetPremiumRow()">
            <option value="BUY">BUY</option>
            <option value="SELL">SELL</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="lot" class="form-label">Number of Lots</label>
          <input type="number" id="lot" class="form-control">
        </div>
        <button type="button" class="btn btn-primary" onclick="calculateMargin()">Calculate Margin</button>
        <table style="border: medium none;" class="tb10Table mt-3" id="resultTable" style="display: none;">
          <tr class="">
            <td colspan="2" style="padding-left: 0px; padding-top: 16px; padding-bottom: 16px;" class="clrSubText">Margin Calculation Result</td>
          </tr>
          <tr class="" id="spanRow">
            <td style="padding-left: 0px; padding-top: 16px; padding-bottom: 16px;" class="clrSubText">SPAN</td>
            <td style="padding-right: 0px; padding-top: 16px; padding-bottom: 16px;" class="fw500 right-align">₹ <span id="spanAmount">0</span></td>
          </tr>
          <tr class="" id="exposureRow">
            <td style="padding-left: 0px; padding-top: 16px; padding-bottom: 16px;" class="clrSubText">Exposure</td>
            <td style="padding-right: 0px; padding-top: 16px; padding-bottom: 16px;" class="fw500 right-align">₹ <span id="exposureAmount">0</span></td>
          </tr>
          <tr class="" id="netPremiumRow" style="display: none;">
            <td style="padding-left: 0px; padding-top: 16px; padding-bottom: 16px;" class="clrSubText">Net Premium</td>
            <td style="padding-right: 0px; padding-top: 16px; padding-bottom: 16px;" class="fw500 right-align">₹ <span id="netPremiumAmount">0</span></td>
          </tr>
          <tr class="" id="totalRow">
            <td style="padding-left: 0px; padding-top: 16px; padding-bottom: 16px;" class="clrSubText">Total</td>
            <td style="padding-right: 0px; padding-top: 16px; padding-bottom: 16px;" class="fw500 right-align">₹ <span id="totalAmount">0</span></td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Include the Bootstrap JS file from a CDN and the custom JS file -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script>
      function showCallPut() {
        var segment = document.getElementById("segment").value;
        var callputDiv = document.getElementById("callputDiv");
        callputDiv.style.display = segment === "OPTION" ? "block" : "none";
      }

      function showNetPremiumRow() {
        var buysell = document.getElementById("buysell").value;
        var netPremiumRow = document.getElementById("netPremiumRow");
        netPremiumRow.style.display = buysell === "BUY" ? "table-row" : "table-row";
      }

      function calculateMargin() {
        // Input 
        var index = document.getElementById("index").value;
        var segment = document.getElementById("segment").value;
        var callput = document.getElementById("callput").value;
        var expiry = document.getElementById("expiry").value;
        var quantity = parseFloat(document.getElementById("quantity").value);
        var buysell = document.getElementById("buysell").value;
        var lot = parseFloat(document.getElementById("lot").value);

        var span = 0;
        var exposure = 0;
        var netPremium = 0;
        var total = 0;

        if (buysell === "SELL") {
          
        } else if (buysell === "BUY") {
          netPremium = 100; 
          document.getElementById("spanRow").style.display = "none";
          document.getElementById("exposureRow").style.display = "none";
          document.getElementById("totalRow").style.display = "none";
        }

        // Update 
        document.getElementById("spanAmount").innerHTML = span.toFixed(2);
        document.getElementById("exposureAmount").innerHTML = exposure.toFixed(2);
        document.getElementById("netPremiumAmount").innerHTML = netPremium.toFixed(2);
        document.getElementById("totalAmount").innerHTML = total.toFixed(2);

        // Show the result table
        var resultTable = document.getElementById("resultTable");
        resultTable.style.display = "table";
      }
    </script>
  </body>
</html>

